<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.0/css/dataTables.dataTables.css" />
    <script src="https://cdn.datatables.net/2.0.0/js/dataTables.js"></script>
    <style>
        #popup {
            height: 50%;

            width: 50%;

            position: absolute;
            background-color: grey;
            display: none;
            z-index: -1;
            opacity: 0;
            left: 20%;
            top: 20%;
        }
    </style>
</head>

<body>
    <form id="Myform1">
        <div id="popup">
            <label>Input 1</label>
            <input type="text" name="input1" id="input1" class="form-control">
            <label>Input 2</label>
            <input type="text" name="input2" id="input2" class="form-control">
            <label>Addition</label>
            <input type="checkbox" name="Operation" id="Addition" value="Addition">

            <label>Subtraction</label>
            <input type="checkbox" name="Operation" id="Subtraction" value="Subtraction">

            <label>Multiplication</label>
            <input type="checkbox" name="Operation" id="Multiplication" value="Multiplication">


            <label>Division</label>
            <input type="checkbox" name="Operation" id="Division" value="Division">


            <input type="button" name="submit" value="submit" id="submit">
            <div class="justify-content-end align-items-end"><input type="button" name="close" id="closePopup"
                    value="closePopup"></div>
            <input type="button" name="Update" value="update" id="update">
        </div>

        <table id="MYtable">
            <thead>
                <tr>
                    <th>Input 1</th>
                    <th>Input 2</th>
                    <th>addition</th>
                    <th>Subtraction</th>
                    <th>Multiplication</th>
                    <th>Division</th>
                    <th>Action</th>
                </tr>
            </thead>

        </table>

        <input type="button" name="show_the_pop" value="show_the_pop" id="show_the_pop">
        <form>

            <script>
                var userData = [];
                var MYtable = $('#MYtable').DataTable();
                var Counter = 0
                $(document).ready(function () {
                    $('#show_the_pop').on('click', function () {
                        $('#popup').css({ "display": "block", "z-index": "1", "opacity": "1" });
                    })
                    $('#closePopup').on('click', function () {
                        $('#popup').css({ "display": "none", "z-index": "-1", "opacity": "0" });
                    });
                    $(document).on('click', '#submit', function (e) {

                        var rowData = {};
                        var additiontotal = 0
                        var Subtractiontotal = 0
                        var Divisiontotal = 0
                        var MultiplicationTotal = 0
                        e.preventDefault();
                        var input1 = $('#input1').val();
                        var input2 = $('#input2').val();
                        var ActualInput1 = parseInt(input1)
                        var ActualInput2 = parseInt(input2)
                        rowData['input1'] = input1
                        rowData['input2'] = input2
                        rowData['Counter'] = Counter
                        debugger
                        var value = []
                        var valuesOfOperation = {}
                        operation = document.querySelectorAll('input[name="Operation"]');
                        // for (var i = 0; i < operation.length; i++) {
                        //     if (operation[i].checked) 
                        //     {
                        //         var id = operation[i].id;
                        //         var value = operation[i].value;
                        //         valuesOfOperation[id]= value
                        //     }


                        // }
                        operation.forEach(function(element)
                        {
                            var id = element.id;
                            var value =element.value
                            valuesOfOperation[id] = value
                        })
                        console.log(valuesOfOperation)
                        rowData['OperationList'] = value

                        value.forEach(function (element) {
                            if (element.id == "Addition") {

                                additiontotal = ActualInput1 + ActualInput2;

                            }
                            else if (element.id == "Subtraction") {
                                debugger
                                Subtractiontotal = ActualInput1 - ActualInput2;

                            }
                            else if (element.id == "Multiplication") {
                                debugger
                                MultiplicationTotal = ActualInput1 * ActualInput2;

                            }
                            else if (element.id == "Division") {
                                debugger

                                Divisiontotal = ActualInput1 / ActualInput2;

                            }


                        });
                        // console.log(value)
                        debugger
                        // console.log(operation)
                        // rowData['Operation'] = value
                        // debugger
                        // if (value == "Addition") {

                        //     additiontotal = ActualInput1 + ActualInput2;

                        // }
                        // else if (value == "Subtraction") {
                        //     debugger
                        //     Subtractiontotal = ActualInput1 - ActualInput2;

                        // }
                        // else if (value == "Multiplication") {
                        //     debugger
                        //     MultiplicationTotal = ActualInput1 * ActualInput2;

                        // }
                        // else if (value == "Division") {
                        //     debugger

                        //     Divisiontotal = ActualInput1 / ActualInput2;

                        // }
                        rowData['additiontotal'] = additiontotal
                        rowData['Subtractiontotal'] = Subtractiontotal
                        rowData['MultiplicationTotal'] = MultiplicationTotal
                        rowData['Divisiontotal'] = Divisiontotal;
                        userData.push(rowData);
                        console.log(userData)
                        $('#Myform1')[0].reset();
                        Counter++;
                        $('#closePopup').click();
                        tableForm();
                    })
                    function tableForm() {
                        MYtable.clear().draw();
                        $.each(userData, function (index, object) {
                            var row = MYtable.row.add([object.input1, object.input2, object.additiontotal, object.Subtractiontotal, object.MultiplicationTotal, object.Divisiontotal, '<input type="button" name="action" class="edit" value="Edit">']).draw().node();
                            $(row).attr('Counter', object.Counter)
                        });

                    }
                    $(document).on('click', '.edit', function () {
                        var FindwhichRowClick = $(this).closest('tr').attr('Counter')
                        var FindInputIndex = userData.findIndex(function (element) {
                            return element.Counter == FindwhichRowClick
                        })
                        var NewData = userData[FindInputIndex]
                        $('#show_the_pop').click();
                        $('#input1').val(userData[FindInputIndex].input1)
                        $('#input2').val(userData[FindInputIndex].input2)
                        var values = userData[FindInputIndex].Operation;
                        var a = userData[FindInputIndex].OperationList
                        console.log(a)
                        a.forEach(function(e)
                        {
                            $('input[name="Operation"][value="'+ e.id+'"]').prop('checked',true)
                        })

                        $(document).on('click', '#update', function () {
                            var newAfterUpdate = {}
                            var value;
                            var additiontotal = 0
                            var Subtractiontotal = 0
                            var Divisiontotal = 0
                            var MultiplicationTotal = 0
                            var Counter = NewData.Counter;
                            var input1 = $('#input1').val();
                            var input2 = $('#input2').val();
                            var ActualInput1 = parseInt(input1)
                            var ActualInput2 = parseInt(input2)
                            var ValuesOfRadioButton = document.querySelectorAll('input[name="Operation"]');
                            for (var i = 0; i < ValuesOfRadioButton.length; i++) {
                                if (ValuesOfRadioButton[i].checked) {
                                    value = ValuesOfRadioButton[i].value
                                }
                            }
                            if (value == "Addition") {

                                additiontotal = ActualInput1 + ActualInput2;

                            }
                            else if (value == "Subtraction") {
                                debugger
                                Subtractiontotal = ActualInput1 - ActualInput2;

                            }
                            else if (value == "Multiplication") {
                                debugger
                                MultiplicationTotal = ActualInput1 * ActualInput2;

                            }
                            else if (value == "Division") {
                                debugger

                                Divisiontotal = ActualInput1 / ActualInput2;

                            }
                            newAfterUpdate['Operation'] = value;
                            newAfterUpdate['additiontotal'] = additiontotal
                            newAfterUpdate['Subtractiontotal'] = Subtractiontotal
                            newAfterUpdate['MultiplicationTotal'] = MultiplicationTotal
                            newAfterUpdate['Divisiontotal'] = Divisiontotal;
                            newAfterUpdate['input1'] = input1;
                            newAfterUpdate['input2'] = input2
                            newAfterUpdate['Counter'] = Counter
                            userData[FindInputIndex] = newAfterUpdate

                            tableForm();
                            $('#closePopup').click();

                        });

                    })

                })
            </script>
</body>

</html>