<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Form Validation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.19.3/jquery.validate.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        .error {
            color: red;
            font-size: smaller;
        }
    </style>
</head>

<body>
    <form class="commentForm" method="get" action="">
        <div id="inputs">
            <p>
                <input class="comment form-control" name="name0" placeholder="Enter Name" />
            </p>
        </div>
        <input class="submit btn btn-primary" type="submit" value="Submit" />
        <input type="button" value="Add Field" id="addInput" />
    </form>

    <script>
        $(document).ready(function() {
            var numberIncr = 1; // used to increment the name for the inputs

            function addInput() {
                $('#inputs').append('<p><input class="comment form-control" name="name' + numberIncr + '" placeholder="Enter Name" /></p>');
                numberIncr++;
            }

            $('form.commentForm').on('submit', function(event) {
                // Clear previous validation messages
                $('.error').remove();

                // Add new validation rules
                $('input.comment').each(function() {
                    $(this).rules("add", {
                        required: true,
                        minlength: 3,
                        pattern: /^[a-zA-Z]+$/,
                        messages: {
                            required: "This field is required",
                            minlength: jQuery.validator.format("Please enter at least {0} characters"),
                            pattern: "Please enter only alphabetic characters"
                        }
                    });
                });

                // Test if form is valid 
                if ($('form.commentForm').valid()) {
                    console.log("Form validates");
                } else {
                    console.log("Form does not validate");
                    return false; // Prevent form submission
                }
            });

            // Set handler for Add Field button click
            $("#addInput").on('click', addInput);

        });

    </script>
</body>

</html>
