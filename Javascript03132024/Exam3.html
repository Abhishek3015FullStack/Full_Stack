<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Form Validation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.19.3/jquery.validate.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>

    </style>
</head>

<body>
    <form id="MYFORM">
        <input type="text" name="FirstName" id="FirstName">
        <input type="button" name="addButton" value="addButton" id="addButton">
        <table id="OutSideTable">
            <thead>
                <tr>
                    <th>Degree</th>
                    <th>School</th>
                    <th>StartTime</th>
                    <th>EndTime</th>
                    <th>Percentage</th>
                    <th>Backlog</th>
                    <th>Action</th>
                </tr>
            </thead>
        </table>
    </form>
    <input type="button" name="submit" id="submit" value="submit">
    <script>
        var flag1 = 0;
        var flag2 = 0
        var flag3 = 0
        var flag4 = 0
        var flag5 = 0
        function getCurrentYearMonth() {
            var date = new Date();
            var year = date.getFullYear();
            var month = date.getMonth() + 1; // Months are 0-indexed, so we add 1
            var date = date.getDate();
            console.log(year + "year")
            console.log(month + "month")
            return year + '-' + '0' + month;
        }
        function Degree(element) {
            debugger
            var name = element.name;
            var value = element.value;
            var id = element.id
            var span = id + "Span";
            var SpanTag = document.getElementById(span);
            var regx = /^[a-zA-Z]{3,}/
            if (value != "") {
                flag1 = 0;
                SpanTag.innerHTML = ""
                if (value.length > 3) {
                    flag1 = 0;
                    SpanTag.innerHTML = ""
                    if (regx.test(value)) {
                        SpanTag.innerHTML = "";
                        flag1 = 0;
                    }
                    else {
                        SpanTag.innerHTML = "please enterd valid input"
                        flag1 = 1;
                    }
                }
                else {
                    SpanTag.innerHTML = "Value is less than 3"
                    flag1 = 1;
                }
            }
            else {
                SpanTag.innerHTML = "this is  required"
                flag1 = 1;
            }
            if (flag1 == 1) {
                return false;
            }
            else {
                return true
            }
        }
        function School(element) {
            var name = element.name;
            var value = element.value;
            var id = element.id
            var span = id + "Span";
            var SpanTag = document.getElementById(span);
            var regx = /^[a-zA-Z]{3,}/
            if (value != "") {
                flag2 = 0;
                SpanTag.innerHTML = ""
                if (value.length > 3) {
                    flag2 = 0;
                    SpanTag.innerHTML = ""
                    if (regx.test(value)) {
                        SpanTag.innerHTML = "";
                        flag2 = 0;
                    }
                    else {
                        SpanTag.innerHTML = "please enterd valid input"
                        flag2 = 1;
                    }
                }
                else {
                    SpanTag.innerHTML = "Value is less than 3"
                    flag2 = 1;
                }
            }
            else {
                SpanTag.innerHTML = "this is  required"
                flag2 = 1;
            }
            if (flag2 == 1) {
                return false;
            }
            else {
                return true
            }

        }
        function StartDate(element)
        {
            return true
        }
        function EndDate(element)
        {
            return true
        }
        function BackLog(element)
        {
            return true
        }
        
        function validity(element) {

            var name = element.name;
            var value = element.value;
            var id = element.id
            var span = id + "Span";
            var SpanTag = document.getElementById(span);

            if (name == "Degree") {
               var Degree1 =  Degree(element)
               return Degree1
            }
            if (name == "School") {
               var School1 = School(element)
               return School1
            }
            if (name == "StartDate") {
                var StartDate1 =StartDate(element)
                return StartDate1
            }
            if (name == "Percentage") {
                var EndDate1 = EndDate(element)
                return EndDate1
            }
            if (name == "BackLog") {
                var BackLog1= BackLog(element)
                return BackLog1
            }
            if (name == "EndDate") {
                var EndDate1 = EndDate(element)
                return EndDate1
            }
           
        }
        var counter = 0
        var dynamic = 0

        $(document).ready(function () {
            $('#addButton').on('click', function () {
                var row = $('<tr>');
                row.append('<td><input type="text" name="Degree" id="Degree' + counter + '" class="dynamic" ><span id="Degree' + counter + 'Span"></span></td>')
                row.append('<td><input type="text" name="School" id="School' + counter + '" class="dynamic"><span id="School' + counter + 'Span"></span></td>')
                row.append('<td><input type="month" name="StartDate" id="StartDate' + counter + '" class="dynamic" max="' + getCurrentYearMonth() + '"><span id="StartDate' + counter + 'Span"></span></td>')
                row.append('<td><input type="month" name="EndDate" id="EndDate' + counter + '" class="dynamic"><span id="EndDate' + counter + 'Span"></span></td>')
                row.append('<td><input type="text" name="Percentage" id="Percentage' + counter + '" class="dynamic"><span id="Percentage' + counter + 'Span"></span></td>')
                row.append('<td><input type="text" name="BackLog" id="BackLog' + counter + '" class="dynamic"><span id="BackLog' + counter + 'Span"></span></td>')
                row.append('<td><input type="button" name="Delete" value="Delete" ></td>');
                counter++;
                $('#OutSideTable').append(row)
            })
            $(document).on('click', '#submit', function (e) {
                var needToCheck = 0
                e.preventDefault();
                var a = []
                var Dynamic = document.querySelectorAll('.dynamic')
                for (var i = 0; i < Dynamic.length; i++) {
                    debugger
                    dynamic = validity(Dynamic[i]);
                    a.push(dynamic)
                }

                console.log(a)
                for (var i = 0; i < Dynamic.length; i++) {
                    debugger
                    if (a[i] == true) {
                        needToCheck = 0
                    }
                    else {
                        needToCheck = 1
                        break;
                    }
                }
                if (needToCheck == 0) {
                    alert();
                }
            })
        })
    </script>
</body>

</html>