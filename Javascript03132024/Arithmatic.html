<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.0/css/dataTables.dataTables.css" />
    <script src="https://cdn.datatables.net/2.0.0/js/dataTables.js"></script>
</head>

<body>
    <form id="myform">
        <label>Input1</label>
        <input type="number" name="" id="input1">
        <label>Input2</label>
        <input type="number" name="" id="input2">
        <input type="submit" id="submit" value="submit">
        <table id="Myform1">
            <thead>
                <tr>
                    <th>Input 1</th>
                    <th>Input 2</th>
                    <th>Calculation</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </form>
    <script>
        var table = $('#Myform1').DataTable();
        var newTable = []
        var counter2 = 0;
        $(document).ready(function () {
            $(document).on('click', '#submit', function (e) {
                var newData = {}
                e.preventDefault();
                var input1 = $('#input1').val();
                var input2 = $('#input2').val();
                newData['input1'] = input1;
                newData['input2'] = input2;
                newData['counter2'] = counter2
                newData['Total'] = 0;
                newTable.push(newData);
                
                counter2++;
                table1()


            })
            function table1() {
                table.clear().draw();
                $.each(newTable, function (index, object) {
                    var row = table.row.add([object.input1, object.input2, '<input type="text" name="calculation" class=".calculations">', '<input type="button" name="add" class="add" value="add"><input type="button" name="Subtract" class="Subtract" value="Subtract"><input type="button" name="Multi" class="Multi" value="Multi"><input type="button" name="Division" class="Division" value="Division">']).draw().node();
                    $(row).attr("counter2", object.counter2)
                })
            }
            $(document).on('click', '.add', function () {
                debugger
                var FindIndex12 = $(this).closest('tr').attr('counter2')
                var row = $(this).closest('tr');
                var DataIndex = newTable.findIndex(function (element) {
                    return element.counter2 == FindIndex12;
                })
                console.log(newTable[DataIndex]);
                var input1 = parseInt(newTable[DataIndex].input1);
                var input2 = parseInt(newTable[DataIndex].input2);
                var addition = input1 + input2;
                var fourthTd = row.find('td:eq(2)');
                fourthTd.text(addition)
                newTable[DataIndex].Total = addition
            })
            $(document).on('click', '.Subtract', function () {
                var FindIndex = $(this).closest('tr').attr('counter2')
                var row = $(this).closest('tr');
                var DataIndex = newTable.findIndex(function (element) {
                    return element.counter2 == FindIndex;
                })
                console.log(newTable[DataIndex]);
                var input1 = parseInt(newTable[DataIndex].input1);
                var input2 = parseInt(newTable[DataIndex].input2);
                var addition = input1 - input2;
                var fourthTd = row.find('td:eq(2)');
                fourthTd.text(addition)
                newTable[DataIndex].Total = addition
            })
            $(document).on('click', '.Multi', function () {
                var FindIndex = $(this).closest('tr').attr('counter2')
                var row = $(this).closest('tr');
                var DataIndex = newTable.findIndex(function (element) {
                    return element.counter2 == FindIndex;
                })
                console.log(newTable[DataIndex]);
                var input1 = parseInt(newTable[DataIndex].input1);
                var input2 = parseInt(newTable[DataIndex].input2);
                var addition = input1 * input2;
                var fourthTd = row.find('td:eq(2)');
                fourthTd.text(addition)
                newTable[DataIndex].Total = addition

            })
            $(document).on('click', '.Division', function () {
                debugger
                var cellText =[];
                var data = {}
                var FindIndex = $(this).closest('tr').attr('counter2')
                var row = $(this).closest('tr');
                var DataIndex = newTable.findIndex(function (element) {
                    return element.counter2 == FindIndex;
                })
                console.log(newTable[DataIndex]);
                var input1 = parseInt(newTable[DataIndex].input1);
                var input2 = parseInt(newTable[DataIndex].input2);
                var addition = input1 / input2;
                var fourthTd = row.find('td:eq(2)');
                fourthTd.text(addition)
                var five = fourthTd.text();
                console.log(five)
                newTable[DataIndex].Total = addition
             
                var total=0 ;
                newTable.forEach(element=>
                {
                    total +=parseInt(element.Total)
                    
                    
                })
                console.log(total)
               
            })

        })
    </script>
</body>

</html>