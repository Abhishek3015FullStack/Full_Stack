<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="Jquery.js"></script>
    <script src="dataTable.js"></script>
    <script src="bootstrap-5.3.3-dist/js/bootstrap.js"></script>
    <link rel="stylesheet" href="datatable.css">
    <link rel="stylesheet" href="bootstrap-5.3.3-dist/css/bootstrap.css">
    <style>
        #popup {
            position: absolute;
            z-index: -1;
            opacity: 1;
            display: none;
            left: 20%;
            background-color: antiquewhite;
        }
    </style>
</head>

<body>
    <form id="myform">
        <div><input type="button" name="openPopup" id="openPopup" value="openPopup"></div>
        <div id="popup">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4">
                        <label>FirstName</label>
                        <input type="text" name="FirstName" id="FirstName" class="form-control">
                    </div>
                    <div class="col-lg-4">
                        <label>LastName</label>
                        <input type="text" name="LastName" id="LastName" class="form-control">
                    </div>
                    <div class="col-lg-4">
                        <label>Graduation</label>
                        <input type="date" name="Graduation" id="Graduation" min="2023-12-06" class="form-control">
                    </div>
                </div> <!--Row -->
                <div class="row">
                    <div class="col-lg-4">
                        <label>PassoutYear</label>
                        <input type="month" name="PassoutYear" id="PassoutYear" class="form-control">
                    </div>
                    <div class="col-lg-4">
                        <label>Address</label>
                        <input type="text" name="Address" id="Address" class="form-control">
                    </div>
                    <div class="col-lg-4">
                        <label>Percentage</label>
                        <input type="text" name="Percentage" id="Percentage" class="form-control">
                    </div>
                </div> <!--Row end-->
                <div class="row">
                    <div class="col-lg-4">
                        <label>Gender</label>
                        <label>Male</label>
                        <input type="radio" name="Gender" id="Male" value="Male">
                        <label>Female</label>
                        <input type="radio" name="Gender" id="Female" value="Female">
                        <label>TransGender</label>
                        <input type="radio" name="Gender" id="TransGender" value="TransGender">
                    </div>
                    <div class="col-lg-4">
                        <select id="selectDropdown">
                            <option value="India" id="India">India</option>
                            <option value="USA" id="USA">USA</option>
                        </select>
                    </div>
                    <div class="col-lg-4">
                        <label>Hobbies</label>
                        <label>Music</label>
                        <input type="checkbox" name="Hobbies" value="music" id="music">
                        <label>Movie</label>
                        <input type="checkbox" name="Hobbies" value="Movie" id="Movie">
                    </div>
                </div>
                <div class="d-flex justify-content-end mt-5 align-items-end">
                    <input type="button" name="Add" id="Add" value="Add">
                </div>
                <div>
                    <table id="mytable" >
                        <thead>
                            <tr>
                                <th scope="th">Degree</th>
                                <th scope="th">School</th>
                                <th scope="th">Start_date</th>
                                <th scope="th">End_date</th>
                                <th scope="th">Percentage</th>
                                <th scope="th">Backlog</th>
                            </tr>
                        </thead>
                        <tr>
                            <td><input type="text" name="inputStatic1" id="inputStatic1"></td>
                            <td><input type="text" name="inputStatic1" id="inputStatic2"></td>
                            <td><input type="text" name="inputStatic1" id="inputStatic3"></td>
                            <td><input type="text" name="inputStatic1" id="inputStatic4"></td>
                            <td><input type="text" name="inputStatic1" id="inputStatic5"></td>
                            <td><input type="text" name="inputStatic1" id="inputStatic6"></td>
                        </tr>
                        <tr>
                            <td><input type="text" name="inputStatic1" id="inputStatic7"></td>
                            <td><input type="text" name="inputStatic1" id="inputStatic8"></td>
                            <td><input type="text" name="inputStatic1" id="inputStatic9"></td>
                            <td><input type="text" name="inputStatic1" id="inputStatic10"></td>
                            <td><input type="text" name="inputStatic1" id="inputStatic11"></td>
                            <td><input type="text" name="inputStatic1" id="inputStatic12"></td>
                        </tr>
                    </table>
                </div>
                <div>
                    <input type="button" name="submit" id="submit" value="submit">
                    <input type="button" name="update" id="update" value="update">
                    <input type="button" name="close" id="close" value="close">

                </div>
            </div><!--container-->
        </div> <!--pop up -->
        <div>
            <table id="OutsideTable" >
                <thead>
                    <tr>
                        <th>FirstName</th>
                        <th>LastName</th>
                        <th>Graduation</th>
                        <th>PassoutYear</th>
                        <th>Address</th>
                        <th>Percentage</th>
                        <th>gender</th>
                        <th>selectDropdown</th>
                        <th>Actions</th>
                    </tr>
                </thead>
            </table>
        </div>
    </form>
    <script>
        var userData = []
        var counter = 0
        var OutsideTable = $('#OutsideTable').DataTable();
        $(document).ready(function () {
            $('#openPopup').on('click', function () {
                $('#popup').css({ "z-index": "1", "opacity": "1", "display": "block" })
                $('#myform .Dynamic').remove();
            })
            $('#close').on('click', function () {
                $('#popup').css({ "z-index": "-1", "opacity": "-1", "display": "none" })
            })
            $(document).on('click', '#Add', function () {
                var row = $('<tr>')
                row.append('<td><input type="text" name="Degree" class="Dynamic"></td>')
                row.append('<td><input type="text" name="School" class="Dynamic"></td>')
                row.append('<td><input type="text" name="Start_date" class="Dynamic"></td>')
                row.append('<td><input type="text" name="End_date" class="Dynamic"></td>')
                row.append('<td><input type="text" name="Percentage" class="Dynamic"></td>')
                row.append('<td><input type="text" name="Backlog" class="Dynamic"></td>')
                $('#mytable').append(row)
            })
            $(document).on('click', '#submit', function (e) {
                var rowData = {}
                e.preventDefault();
                var FirstName = $('#FirstName').val()
                var LastName = $('#LastName').val();
                var Graduation = $('#Graduation').val();
                var PassoutYear = $('#PassoutYear').val();
                var Address = $('#Address').val();
                var Percentage = $('#Percentage').val();
                var gender = $('input[name="Gender"]:checked').val()
                var selectDropdown = $('#selectDropdown').val();
                //checkbox
                var CheckList = document.querySelectorAll('input[name="Hobbies"]:checked')
                var checkListvalues = []
                for (var i = 0; i < CheckList.length; i++) {
                    var value = CheckList[i].value;
                    checkListvalues.push(value)
                }
                var inputStatic1 = $('#inputStatic1').val()
                var inputStatic2 = $('#inputStatic2').val()
                var inputStatic3 = $('#inputStatic3').val()
                var inputStatic4 = $('#inputStatic4').val()
                var inputStatic5 = $('#inputStatic5').val()
                var inputStatic6 = $('#inputStatic6').val()
                var inputStatic7 = $('#inputStatic7').val()
                var inputStatic8 = $('#inputStatic8').val()
                var inputStatic9 = $('#inputStatic9').val()
                var inputStatic10 = $('#inputStatic10').val()
                var inputStatic11 = $('#inputStatic11').val()
                var inputStatic12 = $('#inputStatic12').val()
                var DynamicList = document.querySelectorAll('.Dynamic');
                var DynamicArrayList = []
                for (var i = 0; i < DynamicList.length; i = i + 6) {
                    var DynamicArrayObject = {}
                    for (var j = 0; j < 6; j++) {
                        var element = DynamicList[i + j]
                        var name = element.name;
                        var value = element.value
                        DynamicArrayObject[name] = value
                    }
                    DynamicArrayList.push(DynamicArrayObject)
                }


                var rowData = {
                    FirstName: FirstName,
                    LastName: LastName,
                    Graduation: Graduation,
                    PassoutYear: PassoutYear,
                    Address: Address,
                    Percentage: Percentage,
                    Gender: gender,
                    selectDropdown: selectDropdown,
                    checkListvalues: checkListvalues,
                    inputStatic1: inputStatic1,
                    inputStatic2: inputStatic2,
                    inputStatic3: inputStatic3,
                    inputStatic4: inputStatic4,
                    inputStatic5: inputStatic5,
                    inputStatic6: inputStatic6,
                    inputStatic7: inputStatic7,
                    inputStatic8: inputStatic8,
                    inputStatic9: inputStatic9,
                    inputStatic10: inputStatic10,
                    inputStatic11: inputStatic11,
                    inputStatic12: inputStatic12,
                    counter: counter,
                    DynamicArrayList: DynamicArrayList,
                    Deleted: false
                }
                userData.push(rowData)
                console.log(userData)
                $('#myform .Dynamic').remove();
                $('#myform')[0].reset();
                tableform()
            })
            function tableform() {
                OutsideTable.clear().draw();
                $.each(userData, function (index, object) {
                    var row = OutsideTable.row.add([object.FirstName, object.LastName, object.Graduation, object.PassoutYear, object.Address, object.Percentage, object.Gender, object.selectDropdown, '<input type="button" name="edit" class="edit" value ="edit"><input type="button" class="delete" value="delete"><input type="button" name="showDataTable" class="showDataTable" value="showDataTable">']).draw().node();
                    $(row).attr('counter', object.counter)
                })
            }
            $(document).on('click', '.edit', function () {
                var RowClick = $(this).closest('tr').attr('counter')
                var FindIndex = userData.findIndex(function (element) {
                    return element.counter == RowClick
                })
                var ObjectClick = userData[FindIndex];
                debugger
                var DynamicData = userData[FindIndex].DynamicArrayList
                $('#openPopup').click();
                for (var i = 0; i < DynamicData.length; i++) {
                    $('#Add').click()
                }

                $('#FirstName').val(userData[FindIndex].FirstName)
                $('#LastName').val(userData[FindIndex].LastName)
                $('#Graduation').val(userData[FindIndex].Graduation)
                $('#PassoutYear').val(userData[FindIndex].PassoutYear)
                $('#Address').val(userData[FindIndex].Address)
                $('#Percentage').val(userData[FindIndex].Percentage)
                $('input[name="Gender"][value="' + userData[FindIndex].Gender + '"]').prop('checked', true)
                $('#selectDropdown').val(userData[FindIndex].selectDropdown)
                var a = userData[FindIndex].checkListvalues;
                for (var i = 0; i < a.length; i++) {
                    $('input[name="Hobbies"][value="' + a[i] + '"]').prop('checked', true)
                }

                $('#inputStatic1').val(userData[FindIndex].inputStatic1)
                $('#inputStatic2').val(userData[FindIndex].inputStatic2)
                $('#inputStatic3').val(userData[FindIndex].inputStatic3)
                $('#inputStatic4').val(userData[FindIndex].inputStatic4)
                $('#inputStatic5').val(userData[FindIndex].inputStatic5)
                $('#inputStatic6').val(userData[FindIndex].inputStatic6)
                $('#inputStatic7').val(userData[FindIndex].inputStatic7)
                $('#inputStatic8').val(userData[FindIndex].inputStatic8)
                $('#inputStatic9').val(userData[FindIndex].inputStatic9)
                $('#inputStatic10').val(userData[FindIndex].inputStatic10)
                $('#inputStatic11').val(userData[FindIndex].inputStatic11)
                $('#inputStatic12').val(userData[FindIndex].inputStatic12)


                var DynamicAll = document.querySelectorAll('.Dynamic')
                DynamicAll.forEach(function (element, index) {
                    debugger
                    var element1 = element
                    var name = element.name;
                    var value = DynamicData[Math.floor(index / 6)][name]
                    element1.value = value
                })
                $(document).on('click', '#update', function () {

                    var NewData = {}
                    var FirstName = $('#FirstName').val()
                    var LastName = $('#LastName').val();
                    var Graduation = $('#Graduation').val();
                    var PassoutYear = $('#PassoutYear').val();
                    var Address = $('#Address').val();
                    var Percentage = $('#Percentage').val();
                    var gender = $('input[name="Gender"]:checked').val()
                    var selectDropdown = $('#selectDropdown').val();
                    //checkbox
                    var CheckList = document.querySelectorAll('input[name="Hobbies"]:checked')
                    var checkListvalues = []
                    for (var i = 0; i < CheckList.length; i++) {
                        var value = CheckList[i].value;
                        checkListvalues.push(value)
                    }
                    var inputStatic1 = $('#inputStatic1').val()
                    var inputStatic2 = $('#inputStatic2').val()
                    var inputStatic3 = $('#inputStatic3').val()
                    var inputStatic4 = $('#inputStatic4').val()
                    var inputStatic5 = $('#inputStatic5').val()
                    var inputStatic6 = $('#inputStatic6').val()
                    var inputStatic7 = $('#inputStatic7').val()
                    var inputStatic8 = $('#inputStatic8').val()
                    var inputStatic9 = $('#inputStatic9').val()
                    var inputStatic10 = $('#inputStatic10').val()
                    var inputStatic11 = $('#inputStatic11').val()
                    var inputStatic12 = $('#inputStatic12').val()
                    var DynamicList = document.querySelectorAll('.Dynamic');
                    var DynamicArrayList = []
                    for (var i = 0; i < DynamicList.length; i = i + 6) {
                        var DynamicArrayObject = {}
                        for (var j = 0; j < 6; j++) {
                            var element = DynamicList[i + j]
                            var name = element.name;
                            var value = element.value
                            DynamicArrayObject[name] = value
                        }
                        DynamicArrayList.push(DynamicArrayObject)
                    }
                    var NewData = {
                    FirstName: FirstName,
                    LastName: LastName,
                    Graduation: Graduation,
                    PassoutYear: PassoutYear,
                    Address: Address,
                    Percentage: Percentage,
                    Gender: gender,
                    selectDropdown: selectDropdown,
                    checkListvalues: checkListvalues,
                    inputStatic1: inputStatic1,
                    inputStatic2: inputStatic2,
                    inputStatic3: inputStatic3,
                    inputStatic4: inputStatic4,
                    inputStatic5: inputStatic5,
                    inputStatic6: inputStatic6,
                    inputStatic7: inputStatic7,
                    inputStatic8: inputStatic8,
                    inputStatic9: inputStatic9,
                    inputStatic10: inputStatic10,
                    inputStatic11: inputStatic11,
                    inputStatic12: inputStatic12,
                    counter: counter,
                    DynamicArrayList: DynamicArrayList,
                    Deleted: false
                }
                    userData[FindIndex] = NewData
                    tableform()
                })
            })
            

        })
    </script>
</body>

</html>