<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.0/css/dataTables.dataTables.css" />
    <script src="https://cdn.datatables.net/2.0.0/js/dataTables.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.0/css/dataTables.dataTables.css" />
    <script src="https://cdn.datatables.net/2.0.0/js/dataTables.js"></script>
</head>

<body>
    <form id="Myform">
        <input type="button" name="AddButton" id="AddButton" value="Add Button">
        <label>FirstName</label>
        <input type="text" name="FirstName" id="FirstName">
        <input type="button" name="submit" id="submit" value="submit">
        <table id="Firsttable">
            <thead>
                <tr>
                    <th>Degree0</th>
                    <th>Degree1</th>
                    <th>Degree2</th>
                    <th>Degree3</th>
                    <th>Degree4</th>
                    <th>Degree5</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="MyBody">

            </tbody>
        </table>
        <table id="MySecondTable">
            <thead>
                <tr>
                    <th>FirstName</th>
                    <th>Action</th>
                </tr>
            </thead>
        </table>
    </form>
    <script>
        var counter = 0;
        var allData = [];
        var RowId = 0;

        $(document).ready(function () {
            $('#AddButton').on('click', function () {
                var newRow = ('<tr>')
                for (var i = 0; i < 6; i++) {
                    newRow += '<td><input type="text" class="Dynamic" id="Dynamic' + counter + '"></td>'
                    counter++;

                }
                newRow += '<td><input type="button" class="Delete" value="Delete"></td>'
                $('#MyBody').append(newRow);
            })
            $(document).on('click', '.Delete', function () {
                var rowCount = $('#Firsttable #MyBody tr').length
                if (rowCount > 2) {
                    if ($(this).closest('tr').is(':last-child')) {
                        $(this).closest('tr').remove();
                    }
                    else {
                        alert("please select the last row");
                        return false
                    }
                }
                else {
                    alert("This is fixed row");
                    return false
                }
            })

            $('#Myform').on('click', '#submit', function (e) {
                debugger
                e.preventDefault();
                var rowData = {};
                var FirstName = $('#FirstName').val();
                rowData['FirstName'] = FirstName;

                $('.Dynamic').each(function ()//all fields of the dynamic data is not stored
                {
                    debugger
                    var id = $(this).attr('id');
                    var value = $(this).val();
                    rowData[id] = value;
                })
                rowData['ID'] =RowId;
                allData.push(rowData);
                console.log(allData);

            })

            function Table() 
            {
                var table = $('#MySecondTable');
                table.clear().draw();
                $.each(allData, function(index,object)
                {
                    table.row.add([object.FirstName,'<input type="button" class="Edit" value="Edit"><input type="Delete" class="Delete" value="Delete"> ']).draw().node();

                })
            }
        });
    </script>
</body>

</html>