<!-- Button trigger modal -->!
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</head>

<body>
    <form>
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
            Launch static backdrop modal
        </button>

        <!-- Modal -->
        <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <label for="Id">ID</label>
                        <input type="text" id="ID">
                        <label for="name">name</label>
                        <input type="text" id="name1">

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-success" id="saveData"
                            data-bs-dismiss="modal">SaveData</button>
                        <button type="update" class="updatebtn" data-bs-dismiss="modal">update</button>
                    </div>
                </div>
            </div>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Column 1</th>
                    <th>Column 2</th>
                </tr>
            </thead>
            <tbody id="Tbody">

            </tbody>
        </table>
    </form>
    <script>
        document.addEventListener('DOMContentLoaded', function () {

            var id = document.querySelector('#ID');
            var name1 = document.querySelector('#name1')
            var addButton = document.querySelector('#saveData')
            var table = document.querySelector('#Tbody')
            var updateBTn = document.querySelector('.updatebtn');
            var alldata = [];
            addButton.onclick = function () {
                addingDatainFunction();
            }

            function addingDatainFunction() {

                alldata.push({

                    idInside: id.value,
                    nameInside: name1.value
                });

                console.log(alldata)
                abhishek();
                var StringUserdata = JSON.stringify(alldata);
                localStorage.setItem("userData", StringUserdata);


            }


            var AbhishkeJson = JSON.stringify(alldata);

            function abhishek() {
                table.innerHTML = "";
                alldata.forEach((data, index) => {
                    table.innerHTML += `
            <tr id=${index}>
                <td>${data.idInside}</td>
                <td>${data.nameInside}</td>
                <td> <button type="button" class="btn btn-primary Edit" data-bs-toggle="modal" data-bs-target="#staticBackdrop" >
                                                                                               edit
                </button> </td>
                <td> <button type="button" class="del-btn">
                                                                                                delete
                </button>  </td>

            </tr>
        `
                });

                var DeleteButton = document.querySelectorAll('.del-btn');
                for (var i = 0; i < DeleteButton.length; i++) {
                    DeleteButton[i].onclick = function () {

                        var parent = this.parentElement.parentElement;
                        var id = parent.getAttribute('id');
                        alldata.splice(id, 1);
                        parent.remove();


                    }

                }

                var EditButton = document.querySelectorAll('.Edit')
               
                for (var i = 0; i < EditButton.length; i++) {
                    EditButton[i].onclick = function () {
                        var parent = this.parentElement.parentElement;
                        var td = parent.getElementsByTagName('td');
                        var index = parent.getAttribute('id');

                        var IDvalue = td[0].innerHTML;
                        var name2 = td[1].innerHTML;

                        id.value = IDvalue;
                        name1.value = name2;

                        updateBTn.onclick = function (event) {
                            debugger
                            event.preventDefault();
                            alldata[index] = {
                                idInside: id.value,
                                nameInside: name1.value
                            };

                            abhishek(); // Move abhishek() call here
                        };

                    }
                }


            }

        });

    </script>
</body>

</html>