<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.0/css/dataTables.dataTables.css" />
    <script src="https://cdn.datatables.net/2.0.0/js/dataTables.js"></script>
</head>

<body>
    <form id="Myform">
        <label for="">FirstName</label>
        <input type="text" name="FirstName" id="FirstName">
        <label>LastName</label>
        <input type="text" name="LastName" id="LastName">
        <label>Date of birth</label>
        <input type="month" name="Dateofbirth" id="Dateofbirth">
        <label>Email</label>
        <input type="text" name="Email" id="Email">
        <label>Address</label>
        <input type="text" name="Address" id="Address">
        <label>Graduation Year</label>
        <input type="month" name="GraduationYear" id="GraduationYear">
        <input type="submit" id="submit" name="submit" value="submit">
        <input type="button" id="Add" value="Add" name="Add">

        <table id="insideTable">
            <thead>
                <tr>
                    <th>Degree</th>
                    <th>School/Collge</th>
                    <th>Start Date</th>
                    <th>passout year</th>
                    <th>Percentage</th>
                    <th>BackLog</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>

        <table id="SecondTable">
            <thead>
                <tr>

                    <th>FirstName</th>
                    <th>LastName</th>
                    <th>Dateofbirth</th>
                    <th>Email</th>
                    <th>Address</th>
                    <th>GraduationYear</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>

    </form>
    <script>
        var UserData = [];

        var Counter1 = 0;
        var Counter2 = 0;
        var Counter3 = 0;
        var Counter4 = 0;
        var Counter5 = 0;
        var Counter6 = 0;


        $(document).ready(function () {
            var TableDataTable = $('#SecondTable').DataTable();
            $('#Add').on('click', function () {

                var table = $('#insideTable tbody')
                var newRow = $('<tr>');
                newRow.append('<td><input type="text" name="Degree" class="Dynamic" id="Dynamic' + Counter1 + '"</td>');
                Counter1++
                newRow.append('<td><input type="text" name="Degree" class="Dynamic" id="Dynamic' + Counter1 + '"</td>');
                Counter1++
                newRow.append('<td><input type="text" name="Degree" class="Dynamic" id="Dynamic' + Counter1 + '"</td>');
                Counter1++
                newRow.append('<td><input type="text" name="Degree" class="Dynamic" id="Dynamic' + Counter1 + '"</td>');
                Counter1++
                newRow.append('<td><input type="text" name="Degree" class="Dynamic" id="Dynamic' + Counter1 + '"</td>');
                Counter1++
                newRow.append('<td><input type="text" name="Degree" class="Dynamic" id="Dynamic' + Counter1 + '"</td>');
                Counter1++
                newRow.append('<td><input type="button" name="Delete" class="Delete" value = "Delete"</td>');
                Counter1++
                table.append(newRow);

            });

            $('#Myform').on('click', '#submit', function (e) {
                debugger
                var RowData = {};
                e.preventDefault();
                var FirstName = $('#FirstName').val();
                var LastName = $('#LastName').val();
                var Dateofbirth = $('#Dateofbirth').val();
                var Email = $('#Email').val();
                var Address = $('#Address').val();
                var GraduationYear = $('#GraduationYear').val();
                RowData['FirstName'] = FirstName
                RowData['LastName'] = LastName
                RowData['Dateofbirth'] = Dateofbirth
                RowData['Email'] = Email
                RowData['Address'] = Address
                RowData['GraduationYear'] = GraduationYear
                RowData['Counter2'] = Counter2;
                Counter2++;


                $('.Dynamic').each(function () {
                    debugger
                    var id = $(this).attr('id');
                    var value = $(this).val();
                    RowData[id] = value;
                })
                UserData.push(RowData);
                console.log(UserData);
                Myform.reset();
                $('#insideTable tbody').empty(); 
                Table();


            });
            function Table() {

                TableDataTable.clear().draw();
                $.each(UserData, function (index, object) {
                    var NewRow = TableDataTable.row.add([object.FirstName, object.LastName, object.Dateofbirth, object.Email, object.Address, object.GraduationYear, '<input type="button" name="Delete" value="Delete" class="Delete"><input type="button" name="Edit" class="Edit" value="Edit"><input type="button" class="DataTableShow" value="DataTable">']).draw().node();
                    $(NewRow).attr('Counter2', object.Counter2);
                })
            }

            $(document).on('click', '.Edit', function () {

                var RowCLickFind = $(this).closest('tr').attr('Counter2')
                var FindIndex = UserData.findIndex(function (element) {
                    return element.Counter2 == RowCLickFind;
                });
                debugger
                var RowClick = UserData[FindIndex];
                var ObjectLengh = Object.keys(RowClick);
                var ActualLength = ObjectLengh.length;
                var dynamicIdCount = Object.keys(RowClick).filter(function (key) {
                    return key.includes('Dynamic');
                }).length;

                console.log(dynamicIdCount)
                var FirstName = $('#FirstName');
                var LastName = $('#LastName');
                var Dateofbirth = $('#Dateofbirth');
                var Email = $('#Email');
                var Address = $('#Address');
                var GraduationYear = $('#GraduationYear');

                var ObjectValueFirstName = RowClick.FirstName
                var ObjectValueLastName = RowClick.LastName
                var ObjectValueDateofbirth = RowClick.Dateofbirth
                var ObjectValueEmail = RowClick.Email
                var ObjectValueAddress = RowClick.Address
                var ObjectValueGraduationYear = RowClick.GraduationYear



                FirstName.val(ObjectValueFirstName);
                LastName.val(ObjectValueLastName);
                Dateofbirth.val(ObjectValueDateofbirth);
                Email.val(ObjectValueEmail);
                Address.val(ObjectValueAddress);
                GraduationYear.val(ObjectValueGraduationYear);

                if (dynamicIdCount > 1) {
                    var DynamicFieldsActualCount = dynamicIdCount / 6;
                    for (var i = 0; i < DynamicFieldsActualCount; i++) {
                        Counter1=0;
                        var table = $('#insideTable tbody')
                        var newRow = $('<tr>');
                        newRow.append('<td><input type="text" name="Degree" class="Dynamic" id="Dynamic' + Counter1 + '"</td>');
                        Counter1++
                        newRow.append('<td><input type="text" name="Degree" class="Dynamic" id="Dynamic' + Counter1 + '"</td>');
                        Counter1++
                        newRow.append('<td><input type="text" name="Degree" class="Dynamic" id="Dynamic' + Counter1 + '"</td>');
                        Counter1++
                        newRow.append('<td><input type="text" name="Degree" class="Dynamic" id="Dynamic' + Counter1 + '"</td>');
                        Counter1++
                        newRow.append('<td><input type="text" name="Degree" class="Dynamic" id="Dynamic' + Counter1 + '"</td>');
                        Counter1++
                        newRow.append('<td><input type="text" name="Degree" class="Dynamic" id="Dynamic' + Counter1 + '"</td>');
                        Counter1++
                        newRow.append('<td><input type="button" name="Delete" class="Delete" value = "Delete"</td>');
                        Counter1++
                        table.append(newRow);
                    }

                    $('.Dynamic').each(function () {
                        var id = $(this).attr('id');
                        $(this).val(RowClick[id]);
                    });


                }



            })
            $(document).on('click','#update',function()
            {

            });






        });
    </script>
</body>

</html>